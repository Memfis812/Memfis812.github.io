"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var main=null,table=null,tbody=null,modalWindow=null,counter=0,Client=function(){function e(t){_classCallCheck(this,e),this.date=t.date,this.form=t.form,this.name=t.name,this.juristicAddress=t.juristicAddress,this.actualAddress=t.actualAddress,this.ogrn=t.ogrn,this.inn=t.inn,this.kpp=t.kpp,this.okpo=t.okpo,this.okvd=t.okvd,this.bank=t.bank,this.rs=t.rs,this.ks=t.ks,this.bic=t.bic,this.contact=t.contact,this.tel=t.tel,this.mail=t.mail,this.contractNumber=t.contractNumber,this.contractDate=t.contractDate,this.trade=t.trade,this.sum=t.sum.toFixed(2),this.payment=t.payment.toFixed(2),this.indebtedness=t.indebtedness.toFixed(2),this.comment=t.comment,this.manager=t.manager,this.tableRow=[this.date,this.form,this.name,this.trade,this.sum,this.payment,this.indebtedness,this.manager,this.comment]}return _createClass(e,[{key:"createTableRow",value:function(){var t=document.createElement("tr");tbody.appendChild(t);for(var n=0;n<this.tableRow.length;n++){var r=document.createElement("td");t.appendChild(r),r.innerHTML=this.tableRow[n],r.onclick=e.showFullInformation.bind(this)}counter%2==0&&(t.style.backgroundColor="#272727"),counter++;for(var o=document.querySelectorAll(".main tr"),a=1;a<o.length;a++)parseInt(o[a].children[6].innerHTML)>0?o[a].children[6].style.color="#fb6e40":0===parseInt(o[a].children[6].innerHTML)&&(o[a].children[6].style.color="#42ab9e")}}],[{key:"createTable",value:function(){main=document.querySelector(".main"),table=document.createElement("table"),tbody=document.createElement("tbody"),main.appendChild(table),table.appendChild(tbody)}},{key:"createTableTitle",value:function(){var e=document.createElement("tr");tbody.appendChild(e);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++){var a=document.createElement("th");e.appendChild(a),a.innerHTML=n[o]}}},{key:"showFullInformation",value:function(t){var n=this,r=t.target;if("TD"===r.tagName){document.documentElement.style.overflow="hidden",(modalWindow=document.querySelector(".modal_window")).style.display="block",modalWindow.style.position="fixed",modalWindow.style.top=document.documentElement.clientHeight/2-modalWindow.offsetHeight/2+"px",modalWindow.style.left=document.documentElement.clientWidth/2-modalWindow.offsetWidth/2+"px";var o=document.forms.full_information.querySelectorAll("input");o[0].value=this.date,o[1].value=this.form,o[2].value=this.name,o[3].value=this.juristicAddress,o[4].value=this.actualAddress,o[5].value=this.ogrn,o[6].value=this.inn,o[7].value=this.kpp,o[8].value=this.okpo,o[9].value=this.okvd,o[10].value=this.bank,o[11].value=this.rs,o[12].value=this.ks,o[13].value=this.bic,o[14].value=this.contact,o[15].value=this.tel,o[16].value=this.mail,o[17].value=this.contractNumber,o[18].value=this.contractDate,o[19].value=this.trade,o[20].value=this.sum,o[21].value=this.payment,o[22].value=this.indebtedness,o[23].value=this.manager,o[24].value=this.comment;var a=document.querySelector(".close_icon");a.onclick=function(){modalWindow.style.display="none",document.documentElement.style.overflow="hidden"};var l=document.querySelector(".remove_icon");l.onclick=function(n){n.target;var o=document.querySelector(".remove_modal_window");o.style.display="block",o.style.position="fixed",o.style.top=document.documentElement.clientHeight/2-o.offsetHeight/2+"px",o.style.left=document.documentElement.clientWidth/2-o.offsetWidth/2+"px";var a=document.querySelector(".remove_true_icon"),l=document.querySelector(".close_remove_modal_window_icon"),i=document.createElement("div");i.classList.add("cover"),modalWindow.appendChild(i);var c=document.querySelector(".change_size");modalWindow.appendChild(i),"false"===c.getAttribute("disabled")?(i.style.width="1024px",i.style.left=document.documentElement.clientWidth/2-i.offsetWidth/2+"px"):"true"===c.getAttribute("disabled")&&(i.style.width="100%",i.style.left=0),i.style.height="100%",i.style.position="fixed",i.style.top=0,i.style.backgroundColor="black",i.style.opacity="0.5",a.onclick=function(){var n=r.parentElement;tbody.removeChild(n),modalWindow.style.display="none",o.style.display="none",modalWindow.removeChild(i);for(var a=document.querySelectorAll('.main tr:not(.fixed)[style*="table-row"]'),l=0;l<a.length;l++)l%2==0&&(a[l].style.backgroundColor="#272727"),l%2!=0&&(a[l].style.backgroundColor="#242424");document.documentElement.style.overflow="hidden",e.showFooterInformation(),e.showDeleteInformation(t.target,function(e){setTimeout(function(){e.hidden=!0},3e3)})},l.onclick=function(){o.style.display="none",modalWindow.removeChild(i)}};var i=0,c=document.querySelector(".change_icon");c.onclick=function(){var s=document.querySelectorAll(".change_field");if(i%2==0){for(var d=0;d<s.length;d++)s[d].style.borderColor="#42ab9e",s[d].style.backgroundColor="#ffff",s[d].disabled=!1;c.classList.remove("lnr-pencil"),c.classList.add("lnr-lock"),a.onclick=function(){for(var e=0;e<s.length;e++)s[e].style.borderColor="#fb6e40";return!1},l.onclick=function(){var n=document.querySelector(".remove_modal_window"),o=document.querySelector(".remove_true_icon"),a=document.querySelector(".close_remove_modal_window_icon");n.style.display="block",n.style.position="fixed",n.style.top=document.documentElement.clientHeight/2-n.offsetHeight/2+"px",n.style.left=document.documentElement.clientWidth/2-n.offsetWidth/2+"px";var l=document.createElement("div");l.classList.add("cover");var i=document.querySelector(".change_size");modalWindow.appendChild(l),"false"===i.getAttribute("disabled")?(l.style.width="1024px",l.style.left=document.documentElement.clientWidth/2-l.offsetWidth/2+"px"):"true"===i.getAttribute("disabled")&&(l.style.width="100%",l.style.left=0),l.style.height="100%",l.style.position="fixed",l.style.top=0,l.style.backgroundColor="black",l.style.opacity="0.5",o.onclick=function(){for(var o=0;o<s.length;o++)s[o].style.borderColor="#eeeeee",s[o].style.backgroundColor="#f8f8f8",s[o].disabled=!0;c.classList.remove("lnr-lock"),c.classList.add("lnr-pencil");var a=r.parentElement;tbody.removeChild(a),modalWindow.style.display="none",n.style.display="none",modalWindow.removeChild(l),document.documentElement.style.overflow="hidden";for(var i=document.querySelectorAll('.main tr:not(.fixed)[style*="table-row"]'),d=0;d<i.length;d++)d%2==0&&(i[d].style.backgroundColor="#272727"),d%2!=0&&(i[d].style.backgroundColor="#242424");e.showFooterInformation(),e.showDeleteInformation(t.target,function(e){setTimeout(function(){e.hidden=!0},3e3)})},a.onclick=function(){n.style.display="none",modalWindow.removeChild(l)}}}if(i%2!=0){for(var u=0;u<s.length;u++)s[u].style.borderColor="#eeeeee",s[u].style.backgroundColor="#f8f8f8",s[u].disabled=!0;c.classList.remove("lnr-lock"),c.classList.add("lnr-pencil"),n.form=o[1].value,n.name=o[2].value,n.juristicAddress=o[3].value,n.actualAddress=o[4].value,n.ogrn=o[5].value,n.inn=o[6].value,n.kpp=o[7].value,n.okpo=o[8].value,n.okvd=o[9].value,n.bank=o[10].value,n.rs=o[11].value,n.ks=o[12].value,n.bic=o[13].value,n.contact=o[14].value,n.tel=o[15].value,n.mail=o[16].value,n.contractNumber=o[17].value,n.contractDate=o[18].value,n.manager=o[23].value,n.comment=o[24].value;var m=t.target.parentElement;m.children[1].innerHTML=o[1].value,m.children[2].innerHTML=o[2].value,m.children[7].innerHTML=o[23].value,m.children[8].innerHTML=o[24].value,a.onclick=function(){modalWindow.style.display="none",document.documentElement.style.overflow="hidden"}}i++}}}},{key:"showSelectOption",value:function(){var e=document.querySelector(".search .left_arrow"),t=document.querySelector(".search .select_option"),n=document.querySelector(".search .search_option");if("false"===e.getAttribute("checked")){e.classList.remove("lnr-chevron-left"),e.classList.add("lnr-chevron-down"),e.setAttribute("checked","true");var r=n.getBoundingClientRect().top+window.pageYOffset,o=n.getBoundingClientRect().left+window.pageXOffset;t.style.top=r+n.offsetHeight+6+"px",t.style.left=o+"px",t.style.display="block";var a=document.querySelectorAll(".search .select_option li");document.onclick=function(n){var r=n.target;r!==e&&"КЛИЕНТ"!==r.innerHTML&&"КОЛ-ВО СДЕЛОК"!==r.innerHTML&&"МЕНЕДЖЕР"!==r.innerHTML&&"ОБЩАЯ СУММА"!==r.innerHTML&&"ОПЛАЧЕНО"!==r.innerHTML&&"ЗАДОЛЖЕННОСТЬ"!==r.innerHTML&&(e.classList.remove("lnr-chevron-down"),e.classList.add("lnr-chevron-left"),e.setAttribute("checked","false"),t.style.display="none")};for(var l=0;l<a.length;l++)a[l].onclick=function(r){var o=r.target;n.value=o.innerHTML,e.classList.remove("lnr-chevron-down"),e.classList.add("lnr-chevron-left"),e.setAttribute("checked","false"),t.style.display="none";var a=document.querySelector(".search_field");if("КЛИЕНТ"===o.innerHTML){var l=new Helper(a,"Введите часть наименования клиента или наименование целиком",a.offsetWidth);a.onmouseenter=function(){l.showHelper()},a.onmouseleave=function(){l.removeHelper()}}if("КОЛ-ВО СДЕЛОК"===o.innerHTML||"ОБЩАЯ СУММА"===o.innerHTML||"ОПЛАЧЕНО"===o.innerHTML||"ЗАДОЛЖЕННОСТЬ"===o.innerHTML){var i=new Helper(a,'Введите число. Перед числом допускаются символы " > " , " < " или " > = " , " < = "',a.offsetWidth);a.onmouseenter=function(){i.showHelper()},a.onmouseleave=function(){i.removeHelper()}}if("МЕНЕДЖЕР"===o.innerHTML){var c=new Helper(a,"Введите часть фамилии менеджера или фамилию целиком",a.offsetWidth);a.onmouseenter=function(){c.showHelper()},a.onmouseleave=function(){c.removeHelper()}}}}else"true"===e.getAttribute("checked")&&(e.classList.remove("lnr-chevron-down"),e.classList.add("lnr-chevron-left"),e.setAttribute("checked","false"),t.style.display="none")}},{key:"showDeleteInformation",value:function(e,t){var n=document.querySelector("footer .delete_information");n.hidden=!1,n.innerHTML="запись "+e.parentElement.children[1].innerHTML+" "+e.parentElement.children[2].innerHTML+" удалена!",t(n)}},{key:"showCreateInformation",value:function(e,t){var n=document.querySelector("footer .create_information");n.hidden=!1,n.innerHTML="запись "+e.children[1].innerHTML+" "+e.children[2].innerHTML+" создана!",t(n)}},{key:"getDateStartAndEnd",value:function(){var e=document.querySelector(".date_field_from"),t=document.querySelector(".date_field_to");e.value="01.01.2017",t.value=(new DateFormat).getDateAndTimeFormat().slice(0,10)}},{key:"search",value:function(){var t=document.forms.search,n=(t.search_option,t.request_param),r=t.request_param.value.toLowerCase(),o=t.search_option.value,a=document.querySelectorAll(".main tr:not(.fixed)");if(0===e.searchDate())return e.getDateStartAndEnd(),!1;if("ПАРАМЕТР ФИЛЬТРА"!==o&&""===n.value.trim()||"ПАРАМЕТР ФИЛЬТРА"===o)for(var l=1;l<a.length;l++)a[l].style.display="none",!1===e.searchDate(a[l])||(a[l].style.display="table-row");if("КЛИЕНТ"===o&&""!==n.value.trim()){if(document.querySelector(".funnel").setAttribute("search","true"),!isNaN(r))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является строкой!"]).showErrorWindow(),!1;for(var i=1;i<a.length;i++)a[i].style.display="none",a[i].children[2].innerHTML.toLowerCase()!==r&&!~a[i].children[2].innerHTML.toLowerCase().indexOf(r)||!1===e.searchDate(a[i])||(a[i].style.display="table-row")}if("КОЛ-ВО СДЕЛОК"===o&&""!==n.value.trim()&&"<="===n.value.slice(0,2)){var c=parseInt(n.value.slice(2));if(isNaN(c))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака "<=" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var s=1;s<a.length;s++)a[s].style.display="none",(a[s].children[3].innerHTML==c||a[s].children[3].innerHTML<c)&&!1!==e.searchDate(a[s])&&(a[s].style.display="table-row")}if("КОЛ-ВО СДЕЛОК"===o&&">"===n.value.slice(0,1)&&"<="!==n.value.slice(0,2)&&">="!==n.value.slice(0,2)&&""!==n.value.trim()){var d=parseInt(n.value.slice(1));if(isNaN(d))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака ">" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var u=1;u<a.length;u++)a[u].style.display="none",a[u].children[3].innerHTML>d&&!1!==e.searchDate(a[u])&&(a[u].style.display="table-row")}if("КОЛ-ВО СДЕЛОК"===o&&"<"===n.value.slice(0,1)&&"<="!==n.value.slice(0,2)&&">="!==n.value.slice(0,2)&&""!==n.value.trim()){var m=parseInt(n.value.slice(1));if(isNaN(m))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака "<" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var h=1;h<a.length;h++)a[h].style.display="none",a[h].children[3].innerHTML<m&&!1!==e.searchDate(a[h])&&(a[h].style.display="table-row")}if("КОЛ-ВО СДЕЛОК"===o&&">="===n.value.slice(0,2)&&""!==n.value.trim()){var y=parseInt(n.value.slice(2));if(isNaN(y))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака ">=" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var f=1;f<a.length;f++)a[f].style.display="none",(a[f].children[3].innerHTML==y||a[f].children[3].innerHTML>y)&&!1!==e.searchDate(a[f])&&(a[f].style.display="table-row")}if("КОЛ-ВО СДЕЛОК"===o&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&"<"!==n.value.slice(0,1)&&">"!==n.value.slice(0,1)&&""!==n.value.trim()){var p=parseInt(n.value);if(isNaN(p))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var v=1;v<a.length;v++)a[v].style.display="none",a[v].children[3].innerHTML!=p||!1===e.searchDate(a[v])||(a[v].style.display="table-row")}if("ОБЩАЯ СУММА"===o&&"<="===n.value.slice(0,2)&&""!==n.value.trim()){var b=+n.value.slice(2);if(isNaN(b))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака "<=" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var g=1;g<a.length;g++)a[g].style.display="none",(+a[g].children[4].innerHTML===b||+a[g].children[4].innerHTML<b)&&!1!==e.searchDate(a[g])&&(a[g].style.display="table-row")}if("ОБЩАЯ СУММА"===o&&">="===n.value.slice(0,2)&&""!==n.value.trim()){var w=+n.value.slice(2);if(isNaN(w))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака ">=" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var k=1;k<a.length;k++)a[k].style.display="none",(+a[k].children[4].innerHTML===w||+a[k].children[4].innerHTML>w)&&!1!==e.searchDate(a[k])&&(a[k].style.display="table-row")}if("ОБЩАЯ СУММА"===o&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&">"!==n.value.slice(0,1)&&"<"!==n.value.slice(0,1)&&""!==n.value.trim()){var _=+n.value;if(isNaN(_))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var C=1;C<a.length;C++)a[C].style.display="none",+a[C].children[4].innerHTML!==_||!1===e.searchDate(a[C])||(a[C].style.display="table-row")}if("ОБЩАЯ СУММА"===o&&"<"===n.value.slice(0,1)&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&""!==n.value.trim()){var S=+n.value.slice(1);if(isNaN(S))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var L=1;L<a.length;L++)a[L].style.display="none",+a[L].children[4].innerHTML<S&&!1!==e.searchDate(a[L])&&(a[L].style.display="table-row")}if("ОБЩАЯ СУММА"===o&&">"===n.value.slice(0,1)&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&""!==n.value.trim()){var q=+n.value.slice(1);if(isNaN(q))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var A=1;A<a.length;A++)a[A].style.display="none",+a[A].children[4].innerHTML>q&&!1!==e.searchDate(a[A])&&(a[A].style.display="table-row")}if("ОПЛАЧЕНО"===o&&"<="===n.value.slice(0,2)&&""!==n.value.trim()){var H=+n.value.slice(2);if(isNaN(H))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака "<=" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var T=1;T<a.length;T++)a[T].style.display="none",(+a[T].children[5].innerHTML===H||+a[T].children[5].innerHTML<H)&&!1!==e.searchDate(a[T])&&(a[T].style.display="table-row")}if("ОПЛАЧЕНО"===o&&">="===n.value.slice(0,2)&&""!==n.value.trim()){var E=+n.value.slice(2);if(isNaN(E))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака ">=" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var M=1;M<a.length;M++)a[M].style.display="none",(+a[M].children[5].innerHTML===E||+a[M].children[5].innerHTML>E)&&!1!==e.searchDate(a[M])&&(a[M].style.display="table-row")}if("ОПЛАЧЕНО"===o&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&">"!==n.value.slice(0,1)&&"<"!==n.value.slice(0,1)&&""!==n.value.trim()){var x=+n.value;if(isNaN(x))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var D=1;D<a.length;D++)a[D].style.display="none",+a[D].children[5].innerHTML!==x||!1===e.searchDate(a[D])||(a[D].style.display="table-row")}if("ОПЛАЧЕНО"===o&&"<"===n.value.slice(0,1)&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&""!==n.value.trim()){var W=+n.value.slice(1);if(isNaN(W))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var N=1;N<a.length;N++)a[N].style.display="none",+a[N].children[5].innerHTML<W&&!1!==e.searchDate(a[N])&&(a[N].style.display="table-row")}if("ОПЛАЧЕНО"===o&&">"===n.value.slice(0,1)&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&""!==n.value.trim()){var R=+n.value.slice(1);if(isNaN(R))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var F=1;F<a.length;F++)a[F].style.display="none",+a[F].children[5].innerHTML>R&&!1!==e.searchDate(a[F])&&(a[F].style.display="table-row")}if("ЗАДОЛЖЕННОСТЬ"===o&&"<="===n.value.slice(0,2)&&""!==n.value.trim()){var I=+n.value.slice(2);if(isNaN(I))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака "<=" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var Y=1;Y<a.length;Y++)a[Y].style.display="none",(+a[Y].children[6].innerHTML===I||+a[Y].children[6].innerHTML<I)&&!1!==e.searchDate(a[Y])&&(a[Y].style.display="table-row")}if("ЗАДОЛЖЕННОСТЬ"===o&&">="===n.value.slice(0,2)&&""!==n.value.trim()){var j=+n.value.slice(2);if(isNaN(j))return new ProgramError("ошибка фильтрации","1",['Символ введенный после знака ">=" не является числом!']).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var P=1;P<a.length;P++)a[P].style.display="none",(+a[P].children[6].innerHTML===j||+a[P].children[6].innerHTML>j)&&!1!==e.searchDate(a[P])&&(a[P].style.display="table-row")}if("ЗАДОЛЖЕННОСТЬ"===o&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&">"!==n.value.slice(0,1)&&"<"!==n.value.slice(0,1)&&""!==n.value.trim()){var O=+n.value;if(isNaN(O))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var B=1;B<a.length;B++)a[B].style.display="none",+a[B].children[6].innerHTML!==O||!1===e.searchDate(a[B])||(a[B].style.display="table-row")}if("ЗАДОЛЖЕННОСТЬ"===o&&"<"===n.value.slice(0,1)&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&""!==n.value.trim()){var z=+n.value.slice(1);if(isNaN(z))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var X=1;X<a.length;X++)a[X].style.display="none",+a[X].children[6].innerHTML<z&&!1!==e.searchDate(a[X])&&(a[X].style.display="table-row")}if("ЗАДОЛЖЕННОСТЬ"===o&&">"===n.value.slice(0,1)&&">="!==n.value.slice(0,2)&&"<="!==n.value.slice(0,2)&&""!==n.value.trim()){var $=+n.value.slice(1);if(isNaN($))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является числом!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var G=1;G<a.length;G++)a[G].style.display="none",+a[G].children[6].innerHTML>$&&!1!==e.searchDate(a[G])&&(a[G].style.display="table-row")}if("МЕНЕДЖЕР"===o&&""!==n.value.trim()){if(!isNaN(r))return new ProgramError("ошибка фильтрации","1",["Введенный символ не является строкой!"]).showErrorWindow(),!1;document.querySelector(".funnel").setAttribute("search","true");for(var J=1;J<a.length;J++)a[J].style.display="none",a[J].children[7].innerHTML.toLowerCase()!==r&&!~a[J].children[7].innerHTML.toLowerCase().indexOf(r)||!1===e.searchDate(a[J])||(a[J].style.display="table-row")}for(var K=document.querySelectorAll('.main tr:not(.fixed)[style*="table-row"]'),Q=0;Q<K.length;Q++)Q%2==0&&(K[Q].style.backgroundColor="#272727"),Q%2!=0&&(K[Q].style.backgroundColor="#242424")}},{key:"clearSearch",value:function(){var t=document.querySelectorAll(".main tr");document.forms.search.request_param.value="";for(var n=1;n<t.length;n++)!1===e.searchDate(t[n])||(t[n].style.display="table-row");for(var r=document.querySelectorAll('.main tr:not(.fixed)[style*="table-row"]'),o=0;o<r.length;o++)o%2==0&&(r[o].style.backgroundColor="#272727"),o%2!=0&&(r[o].style.backgroundColor="#242424")}},{key:"searchDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector(".date_field_from"),n=document.querySelector(".date_field_to"),r=/^([0-9]{2}).([0-9]{2}).([0-9]{4})$/,o=r.exec(t.value),a=r.exec(n.value);if(null===o&&null!==a)return new ProgramError("ошибка фильтрации","1",["левое поле даты заполенно не корректно!",'( дата вводится в формате "чч.мм.гггг"! )']).showErrorWindow(),0;if(null===a&&null!==o)return new ProgramError("ошибка фильтрации","1",["правое поле даты заполенно не корректно!",'( дата вводится в формате "чч.мм.гггг"! )']).showErrorWindow(),0;if(null===o&&null===a)return new ProgramError("ошибка фильтрации","2",["левое поле даты заполенно не корректно!","правое поле даты заполенно не корректно!",'( дата вводится в формате "чч.мм.гггг"! )']).showErrorWindow(),0;if(null!==e){var l=t.value,i=n.value,c=(document.querySelectorAll(".main tr"),l.slice(0,2)),s=l.slice(3,5),d=l.slice(6),u=i.slice(0,2),m=i.slice(3,5),h=d+"-"+s+"-"+c,y=i.slice(6)+"-"+m+"-"+u,f=e.children[0].innerHTML.slice(0,2),p=e.children[0].innerHTML.slice(3,5),v=e.children[0].innerHTML.slice(6,10)+"-"+p+"-"+f;return Date.parse(h)<=Date.parse(v)&&Date.parse(y)>=Date.parse(v)}}},{key:"showFooterInformation",value:function(){var e=document.querySelector("footer"),t=document.querySelectorAll(".main tr:not(.fixed)"),n=document.querySelector(".date_field_from"),r=document.querySelector(".date_field_to");e.children[0].innerHTML="период : с "+n.value+" по "+r.value,e.children[1].innerHTML="клиентов : "+function(){for(var e=0,n=1;n<t.length;n++)"table-row"===getComputedStyle(t[n]).display&&e++;return e}(),e.children[2].innerHTML="сделок : "+function(){for(var e=0,n=1;n<t.length;n++)"table-row"===getComputedStyle(t[n]).display&&(e+=parseInt(t[n].children[3].innerHTML));return e}(),e.children[3].innerHTML="на сумму : "+function(){for(var e=0,n=1;n<t.length;n++)"table-row"===getComputedStyle(t[n]).display&&(e+=parseFloat(t[n].children[4].innerHTML));return e.toFixed(2)}(),e.children[4].innerHTML="оплачено : "+function(){for(var e=0,n=1;n<t.length;n++)"table-row"===getComputedStyle(t[n]).display&&(e+=parseFloat(t[n].children[5].innerHTML));return e.toFixed(2)}(),e.children[5].innerHTML="задолженность : "+function(){for(var e=0,n=1;n<t.length;n++)"table-row"===getComputedStyle(t[n]).display&&(e+=parseFloat(t[n].children[6].innerHTML));return e.toFixed(2)}()}}]),e}(),ProgramError=function(){function e(t,n,r){_classCallCheck(this,e),this.errorType=t,this.errorNumber=n,this.errorText=r}return _createClass(e,[{key:"showErrorWindow",value:function(){var t=document.createElement("div"),n=document.createElement("div");document.body.appendChild(n),n.classList.add("cover"),n.style.position="fixed",n.style.width="100%",n.style.height="100%",n.style.top=document.documentElement.clientHeight/2-n.offsetHeight/2+"px",n.style.left=document.documentElement.clientWidth/2-n.offsetWidth/2+"px",n.style.backgroundColor="black",n.style.opacity="0.5",document.body.appendChild(t),t.classList.add("error_window");var r=document.createElement("span"),o=document.createElement("span");o.classList.add("lnr"),o.classList.add("lnr-cross-circle"),r.classList.add("lnr"),r.classList.add("lnr-warning");var a=document.createElement("p"),l=document.createElement("p"),i=document.createElement("p");a.innerHTML="Тип ошибки : "+this.errorType,l.innerHTML="Кол-во ошибок : "+this.errorNumber,i.innerHTML="Список ошибок :",t.appendChild(r),t.appendChild(a),t.appendChild(l),t.appendChild(i);for(var c=0;c<this.errorText.length;c++){var s=document.createElement("p");t.appendChild(s).innerHTML=this.errorText[c]}t.appendChild(o),t.style.position="fixed",t.style.top=document.documentElement.clientHeight/2-t.offsetHeight/2+"px",t.style.left=document.documentElement.clientWidth/2-t.offsetWidth/2+"px",o.onclick=function(){e.removeErrorWindow()}}}],[{key:"removeErrorWindow",value:function(){var e=document.querySelector(".error_window"),t=document.querySelector(".cover");document.body.removeChild(e),document.body.removeChild(t)}}]),e}(),DateFormat=function(){function e(){_classCallCheck(this,e),this.date=(new Date).getDate()+"",this.month=(new Date).getMonth()+1+"",this.year=(new Date).getFullYear()+"",this.hours=(new Date).getHours()+"",this.minutes=(new Date).getMinutes()+""}return _createClass(e,[{key:"getDateAndTimeFormat",value:function(){return 1===this.date.length&&(this.date=0+this.date),1===this.month.length&&(this.month=0+this.month),1===this.hours.length&&(this.hours=0+this.hours),1===this.minutes.length&&(this.minutes=0+this.minutes),this.date+"."+this.month+"."+this.year+"/"+this.hours+":"+this.minutes}},{key:"getDateFormat",value:function(e,t,n){return 1===(e+="").length&&(e="0"+e),1===(t+="").length&&(t="0"+t),e+"."+t+"."+n}}]),e}(),Helper=function(){function e(t,n,r){_classCallCheck(this,e),this.target=t,this.text=n,this.width=r,this.helper=null}return _createClass(e,[{key:"showHelper",value:function(){this.helper=document.createElement("div"),this.helper.classList.add("helper"),document.body.appendChild(this.helper);var e=document.createElement("p");this.helper.appendChild(e),e.innerHTML=this.text;var t={top:this.target.getBoundingClientRect().top+window.pageYOffset+this.target.offsetHeight+10+"px",left:this.target.getBoundingClientRect().left+window.pageXOffset+"px"};this.helper.style.position="absolute",this.helper.style.top=t.top,this.helper.style.left=t.left,this.helper.style.width=this.width+"px"}},{key:"removeHelper",value:function(){document.body.removeChild(this.helper)}}]),e}(),Calendar=function(){function e(t,n){_classCallCheck(this,e),this.target=t,this.name=n}return _createClass(e,[{key:"createCalendar",value:function(){var t=document.createElement("div");document.body.appendChild(t),t.classList.add("calendar"),t.classList.add(this.name),t.style.top=this.target.getBoundingClientRect().top+window.pageYOffset+this.target.offsetHeight+6+"px",t.style.left=this.target.getBoundingClientRect().left+window.pageXOffset+"px";var n=document.createElement("div");t.appendChild(n),n.classList.add("calendar_header");var r=document.createElement("h4");n.appendChild(r),r.classList.add("calendar_header_content");var o=document.createElement("span");n.appendChild(o),o.classList.add("lnr"),o.classList.add("lnr-chevron-up"),o.classList.add("next_month_btn");var a=document.createElement("span");n.appendChild(a),a.classList.add("lnr"),a.classList.add("lnr-chevron-down"),a.classList.add("previous_month_btn");var l=document.createElement("span");l.classList.add("previous_year_btn"),l.classList.add("lnr"),l.classList.add("lnr-chevron-left"),n.insertBefore(l,r);var i=document.createElement("span");i.classList.add("next_year_btn"),i.classList.add("lnr"),i.classList.add("lnr-chevron-right"),n.insertBefore(i,r),r.innerHTML=e.getMonthFormat((new Date).getMonth())+" "+(new Date).getFullYear(),e.createCalendarDays(this.name)}}],[{key:"getMonthFormat",value:function(e){return["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][e]}},{key:"getDaysInMonth",value:function(e,t){return 33-new Date(e,t,33).getDate()}},{key:"getYearAndMonth",value:function(e){var t=document.querySelector("."+e+" .calendar_header_content").innerHTML.split(" ");return{year:parseInt(t[1]),month:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"].indexOf(t[0])}}},{key:"createCalendarDays",value:function(t){for(var n=e.getYearAndMonth(t).month,r=e.getYearAndMonth(t).year,o=document.querySelector("."+t),a="<table><tr><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th><th>вс</th></tr><tr>",l=0;l<e.getDay(e.getYearAndMonth(t).year,e.getYearAndMonth(t).month);l++)a+="<td></td>";for(var i=1;i<=e.getDaysInMonth(e.getYearAndMonth(t).year,e.getYearAndMonth(t).month);i++)a+="<td>"+i+"</td>",0===new Date(e.getYearAndMonth(t).year,e.getYearAndMonth(t).month,i).getDay()&&(a+="</tr><tr>");o.innerHTML+=a;var c=o.querySelector(".calendar_header"),s=c.querySelector(".calendar_header_content"),d=c.querySelector(".next_month_btn"),u=c.querySelector(".previous_month_btn"),m=c.querySelector(".next_year_btn");c.querySelector(".previous_year_btn").onclick=function(){r--,o.removeChild(o.querySelector("table")),s.innerHTML=e.getMonthFormat(n)+" "+r,e.createCalendarDays(t)},m.onclick=function(){r++,o.removeChild(o.querySelector("table")),s.innerHTML=e.getMonthFormat(n)+" "+r,e.createCalendarDays(t)},u.onclick=function(){--n<0&&(n=11,r--),o.removeChild(o.querySelector("table")),s.innerHTML=e.getMonthFormat(n)+" "+r,e.createCalendarDays(t)},d.onclick=function(){++n>11&&(n=0,r++),o.removeChild(o.querySelector("table")),s.innerHTML=e.getMonthFormat(n)+" "+r,e.createCalendarDays(t)};for(var h=o.querySelectorAll(".calendar td"),y=o.querySelectorAll(".calendar tr"),f=0;f<y.length;f++)y[f].children[5]&&(y[f].children[5].style.color="#fb6e40"),y[f].children[6]&&(y[f].children[6].style.color="#fb6e40");for(var p=function(n){h[n].innerHTML==(new Date).getDate()&&(new Date).getMonth()===e.getYearAndMonth(t).month&&(new Date).getFullYear()===e.getYearAndMonth(t).year&&(h[n].style.backgroundColor="#fb6e40",h[n].style.color="#ffff"),h[n].onmouseenter=function(){""!==h[n].innerHTML?(h[n].style.cursor="pointer",h[n].style.border="0.1rem solid #fb6e40"):""===h[n].innerHTML&&(h[n].style.cursor="auto")},h[n].onmouseleave=function(e){h[n].style.border="0.1rem solid #333742"}},v=0;v<h.length;v++)p(v)}},{key:"getDay",value:function(e,t){var n=new Date(e,t,1).getDay();return 0===n&&(n=7),n-1}}]),e}(),init=function(){Client.createTable(),Client.createTableTitle("Дата","Форма","Клиент","Сделок","Общая сумма","Оплачено","Задолженность","Менеджер","Комментарий"),new Client({date:"21.09.2017/10:42",form:"ЗАО",name:"ЛенГазСтрой",juristicAddress:"Индустриaльный пр., д.42, к.1, офис 317",actualAddress:"Индустриaльный пр., д.42, к.1, офис 317",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Юрий",tel:"(812)540-56-18",mail:"lengazstroi@mail.ru",contractNumber:"1131-1",contractDate:"22.09.17",trade:8,sum:234567,payment:23e4,indebtedness:4567,manager:"Иванов A.A.",comment:"оплата 5 б/д по оригиналам"}).createTableRow(),new Client({date:"22.09.2017/17:30",form:"ООО",name:"Альфа",juristicAddress:"Ленская ул., д.19 офис 47",actualAddress:"Ленская ул., д.19 офис 47",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Алексей",tel:"(812)640-43-45",mail:"alfa@mail.ru",contractNumber:"1132-2",contractDate:"24.09.17",trade:1,sum:2e4,payment:2e4,indebtedness:0,manager:"Фролов C.A.",comment:"работаем по предоплате"}).createTableRow(),new Client({date:"23.09.2017/14:36",form:"ООО",name:"Оптима",juristicAddress:"Хасанская ул., д.6 офис 117",actualAddress:"Хасанская ул., д.6 офис 117",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Виктор",tel:"(812)546-12-78",mail:"optima@mail.ru",contractNumber:"1133-3",contractDate:"25.09.17",trade:2,sum:18500,payment:6e3,indebtedness:12500,manager:"Шелюков С.Г.",comment:"платят не вовремя"}).createTableRow(),new Client({date:"25.09.2017/12:40",form:"ИП",name:"Гришанович Л.М",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"grishanovich1977@mail.ru",contractNumber:"1134",contractDate:"25.09.17",trade:1,sum:65e3,payment:65e3,indebtedness:0,manager:"Шелюков С.Г.",comment:""}).createTableRow(),new Client({date:"26.09.2017/11:50",form:"АО",name:"Промтехснаб",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Алексей",tel:"(812)327-15-30",mail:"promtehsnab@mail.ru",contractNumber:"1135",contractDate:"25.09.17",trade:10,sum:1567600,payment:12e5,indebtedness:367600,manager:"Гаврилов Е.М.",comment:"оборудование, приоритетный клиент"}).createTableRow(),new Client({date:"27.09.2017/09:50",form:"ООО",name:"Аргон",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)245-45-23",mail:"argon@mail.ru",contractNumber:"1136",contractDate:"25.09.17",trade:2,sum:5e4,payment:5e4,indebtedness:0,manager:"Гаврилов Е.М.",comment:""}).createTableRow(),new Client({date:"30.09.2017/16:21",form:"ООО",name:"Аорус",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"aorus@mail.ru",contractNumber:"1137",contractDate:"25.09.17",trade:3,sum:34500,payment:34500,indebtedness:0,manager:"Фролов С.А.",comment:""}).createTableRow(),new Client({date:"02.10.2017/11:36",form:"ЗАО",name:"Инфотекс",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"infotex@mail.ru",contractNumber:"1138",contractDate:"25.09.17",trade:1,sum:12e4,payment:12e4,indebtedness:0,manager:"Гаврилов Е.М.",comment:"перспективный клиент"}).createTableRow(),new Client({date:"20.10.2017/15:24",form:"ООО",name:"Логос",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Андрей",tel:"(812)340-15-45",mail:"logos@mail.ru",contractNumber:"1140",contractDate:"25.09.17",trade:5,sum:1e5,payment:8e4,indebtedness:2e4,manager:"Шелюков С.Г.",comment:""}).createTableRow(),new Client({date:"05.11.2017/17:22",form:"ООО",name:"Пальмира",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Александр",tel:"(812)340-15-45",mail:"palmira@mail.ru",contractNumber:"1141",contractDate:"25.09.17",trade:3,sum:15e4,payment:15e4,indebtedness:0,manager:"Гаврилов Е.М.",comment:"перспективный клиент"}).createTableRow(),new Client({date:"10.12.2017/11:30",form:"ООО",name:"Флагман",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"flagman@mail.ru",contractNumber:"1142",contractDate:"25.09.17",trade:1,sum:3e5,payment:0,indebtedness:3e5,manager:"Гаврилов Е.М.",comment:"не оплатили перевозку, ждем оплаты, заказы не брать!"}).createTableRow(),new Client({date:"15.12.2017/13:19",form:"ООО",name:"СтройМонтаж",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"stroimontag@mail.ru",contractNumber:"1143",contractDate:"25.09.17",trade:8,sum:125500,payment:1e5,indebtedness:25500,manager:"Гаврилов Е.М.",comment:"строительные товары, спб и ло"}).createTableRow(),new Client({date:"25.12.2017/09:20",form:"АО",name:"Промоборудование",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"promspb@mail.ru",contractNumber:"1144",contractDate:"25.09.17",trade:5,sum:15e5,payment:15e5,indebtedness:0,manager:"Иванов А.А.",comment:"проектные перевозки, негабарит"}).createTableRow(),new Client({date:"28.12.2017/09:50",form:"ООО",name:"Продукт-Трейд",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"producttrade@mail.ru",contractNumber:"1145",contractDate:"25.09.17",trade:15,sum:564e3,payment:564e3,indebtedness:0,manager:"Иванов А.А.",comment:"продукты питания, заморозка"}).createTableRow(),new Client({date:"11.01.2018/10:45",form:"ООО",name:"Компьютер-маркет",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"computermarket@mail.ru",contractNumber:"1146",contractDate:"25.09.17",trade:20,sum:87e4,payment:5e5,indebtedness:37e4,manager:"Иванов А.А.",comment:"интернет-магазин, развозка по СПБ"}).createTableRow(),new Client({date:"15.01.2018/14:42",form:"ЗАО",name:"Новгородская мебельная фабрика",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"optmebel@mail.ru",contractNumber:"1147",contractDate:"25.09.17",trade:2,sum:6e4,payment:6e4,indebtedness:0,manager:"Гаврилов Е.М.",comment:"мебельное производство, по РФ"}).createTableRow(),new Client({date:"17.01.2018/12:45",form:"ООО",name:"Шефкейк",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"shef@mail.ru",contractNumber:"1148",contractDate:"25.09.17",trade:3,sum:18600,payment:1e4,indebtedness:8600,manager:"Шелюков С.Г.",comment:"кондитерские изделия, по спб"}).createTableRow(),new Client({date:"20.01.2018/09:15",form:"ООО",name:"Строй-успех",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"stroiyspeh@mail.ru",contractNumber:"1149",contractDate:"25.09.17",trade:1,sum:9e3,payment:9e3,indebtedness:0,manager:"Гаврилов Е.М.",comment:"строительные товары, спб и ло"}).createTableRow(),new Client({date:"25.01.2018/17:47",form:"ООО",name:"НерудОпт",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"nerudopt@mail.ru",contractNumber:"1150",contractDate:"25.09.17",trade:12,sum:156400,payment:15e4,indebtedness:6400,manager:"Фролов С.А.",comment:"песок, щебень, спб и ло"}).createTableRow(),new Client({date:"29.01.2018/16:26",form:"ЗАО",name:"Фрион",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"frion@mail.ru",contractNumber:"1151",contractDate:"25.09.17",trade:1,sum:45e3,payment:45e3,indebtedness:0,manager:"Фролов С.А.",comment:"ADR, по РФ"}).createTableRow(),new Client({date:"02.02.2018/10:51",form:"ООО",name:"Медтрейд",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"medtrade@mail.ru",contractNumber:"1152",contractDate:"25.09.17",trade:1,sum:35e3,payment:35e3,indebtedness:0,manager:"Гаврилов Е.М.",comment:"медицинское оборудование"}).createTableRow(),new Client({date:"08.02.2018/11:50",form:"ИП",name:"Кожевников Н.М",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"zakazmebel@mail.ru",contractNumber:"1153",contractDate:"25.09.17",trade:5,sum:42e3,payment:42e3,indebtedness:0,manager:"Иванов А.А.",comment:"мебель, интернет-магазин, по спб"}).createTableRow(),new Client({date:"10.02.2018/09:12",form:"ООО",name:"ОптМеталл",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"optmetall@mail.ru",contractNumber:"1154",contractDate:"25.09.17",trade:1,sum:58e3,payment:58e3,indebtedness:0,manager:"Гаврилов Е.М.",comment:""}).createTableRow(),new Client({date:"14.02.2018/12:47",form:"ООО",name:"Фишторг",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"fishtorg@mail.ru",contractNumber:"1155",contractDate:"25.09.17",trade:0,sum:0,payment:0,indebtedness:0,manager:"Шелюков С.Г.",comment:"новый клиент, ждем заявок"}).createTableRow(),new Client({date:"14.02.2018/16:33",form:"ООО",name:"Трейд-Комплект",juristicAddress:"ш. Революции, д.12 офис 134",actualAddress:"ул.Химиков., д.45 офис 12",ogrn:"12312312",inn:"0980987867",kpp:"56756724",okpo:"543457",okvd:"63.30",bank:'ОАО "БАНК" г.Санкт-Перербург',rs:"12345678900987654321",ks:"12345678900987653214",bic:"32323",contact:"Леонид",tel:"(812)340-15-45",mail:"tradecomplect@mail.ru",contractNumber:"1156",contractDate:"25.09.17",trade:0,sum:0,payment:0,indebtedness:0,manager:"Шелюков С.Г.",comment:"новый клиент, ждем заявок"}).createTableRow();var e=document.querySelector(".tools"),t=document.querySelector("header"),n=document.querySelector("footer");main.style.height=document.documentElement.clientHeight-e.offsetHeight-t.offsetHeight-n.offsetHeight+"px",Client.getDateStartAndEnd(),Client.showFooterInformation(),window.onresize=function(){if(main.style.height=document.documentElement.clientHeight-e.offsetHeight-t.offsetHeight-n.offsetHeight+"px",document.contains(document.querySelector(".calendar"))&&document.body.removeChild(document.querySelector(".calendar")),document.querySelector(".main tbody").contains(document.querySelector(".fixed"))){document.querySelector(".fixed").style.width=document.querySelectorAll(".main tr")[0].offsetWidth+"px";for(var r=0;r<document.querySelector(".fixed").querySelectorAll("th").length;r++)document.querySelector(".fixed").querySelectorAll("th")[r].style.width=parseInt(getComputedStyle(document.querySelectorAll(".main table tr:first-child th")[r]).width)+"px";document.querySelector(".fixed").style.top=e.getBoundingClientRect().bottom+window.pageYOffset+"px"}if("true"===document.querySelector(".search .left_arrow").getAttribute("checked")){var o=document.querySelector(".search .select_option"),a=document.querySelector(".search .search_option"),l=a.getBoundingClientRect().top+window.pageYOffset,i=a.getBoundingClientRect().left+window.pageXOffset;o.style.top=l+a.offsetHeight+6+"px",o.style.left=i+"px"}document.querySelector(".modal_window").style.left=document.documentElement.clientWidth/2-document.querySelector(".modal_window").offsetWidth/2+"px",document.querySelector(".modal_window_create").style.left=document.documentElement.clientWidth/2-document.querySelector(".modal_window_create").offsetWidth/2+"px",document.querySelector(".remove_modal_window").style.left=document.documentElement.clientWidth/2-document.querySelector(".remove_modal_window").offsetWidth/2+"px",document.querySelector(".close_modal_window_create").style.left=document.documentElement.clientWidth/2-document.querySelector(".close_modal_window_create").offsetWidth/2+"px",document.querySelector(".remove_modal_window").style.top=document.documentElement.clientHeight/2-document.querySelector(".remove_modal_window").offsetHeight/2+"px",document.querySelector(".close_modal_window_create").style.top=document.documentElement.clientHeight/2-document.querySelector(".close_modal_window_create").offsetHeight/2+"px",document.body.contains(document.querySelector(".cover"))&&(document.querySelector(".cover").style.left=document.documentElement.clientWidth/2-document.querySelector(".cover").offsetWidth/2+"px")},main.onscroll=function(){var t=table.querySelectorAll("tr")[0],n=t.getBoundingClientRect().bottom+window.pageYOffset-(main.getBoundingClientRect().top+pageYOffset);if(main.scrollTop>n&&!tbody.contains(tbody.querySelector(".fixed"))){var r=t.cloneNode(!0);tbody.appendChild(r),r.classList.add("fixed"),r.style.width=t.offsetWidth+"px",r.style.top=e.getBoundingClientRect().bottom+window.pageYOffset+"px",r.left=e.getBoundingClientRect().left+window.pageXOffset+"px";for(var o=t.querySelectorAll("th"),a=r.querySelectorAll("th"),l=0;l<a.length;l++)a[l].style.width=parseInt(getComputedStyle(o[l]).width)+"px"}else main.scrollTop<=n&&tbody.contains(tbody.querySelector(".fixed"))&&tbody.removeChild(tbody.querySelector(".fixed"))},e.onclick=function(r){var o=r.target;if(o.classList.contains("lnr-file-add")){document.documentElement.style.overflow="hidden";var a=document.querySelector(".modal_window_create");a.style.display="block",a.style.position="fixed",a.style.top=document.documentElement.clientHeight/2-a.offsetHeight/2+"px",a.style.left=document.documentElement.clientWidth/2-a.offsetWidth/2+"px";for(var l=document.forms.create_new_client.querySelectorAll("input"),i=0;i<l.length;i++)0!==i?19!==i&&20!==i&&21!==i&&22!==i?(l[i].value="",l[i].disabled=!1,l[i].style.backgroundColor="#ffff",l[i].style.borderColor="#42ab9e",l[i].placeholder=""):l[i].value=0:l[i].value=(new DateFormat).getDateAndTimeFormat();document.querySelector(".modal_window_create .close_icon").onclick=function(){var e=document.querySelector(".close_modal_window_create"),t=document.querySelector(".exit_modal_window_create_icon"),n=document.querySelector(".close_close_modal_window_icon");e.style.display="block",e.style.position="fixed",e.style.top=document.documentElement.clientHeight/2-e.offsetHeight/2+"px",e.style.left=document.documentElement.clientWidth/2-e.offsetWidth/2+"px";var r=document.createElement("div");r.classList.add("cover");var o=document.querySelector(".change_size");a.appendChild(r),"false"===o.getAttribute("disabled")?(r.style.width="1024px",r.style.left=document.documentElement.clientWidth/2-r.offsetWidth/2+"px"):"true"===o.getAttribute("disabled")&&(r.style.width="100%",r.style.left=0),r.style.height="100%",r.style.position="fixed",r.style.top=0,r.style.backgroundColor="black",r.style.opacity="0.5",n.onclick=function(){e.style.display="none",a.removeChild(r)},t.onclick=function(){a.style.display="none",e.style.display="none",a.removeChild(r),document.documentElement.style.overflow="hidden"}},document.querySelector(".modal_window_create .save_icon").onclick=function(){return l[1].value||l[2].value?l[1].value&&!l[2].value?(l[2].placeholder="поле обязательно для заполнения!",l[2].style.borderColor="#fb6e40",!1):!l[1].value&&l[2].value?(l[1].placeholder="поле обязательно для заполнения!",l[1].style.borderColor="#fb6e40",!1):(l[1].placeholder="",l[2].placeholder="",new Client({date:l[0].value,form:l[1].value,name:l[2].value,juristicAddress:l[3].value,actualAddress:l[4].value,ogrn:l[5].value,inn:l[6].value,kpp:l[7].value,okpo:l[8].value,okvd:l[9].value,bank:l[10].value,rs:l[11].value,ks:l[12].value,bic:l[13].value,contact:l[14].value,tel:l[15].value,mail:l[16].value,contractNumber:l[17].value,contractDate:l[18].value,trade:0,sum:0,payment:0,indebtedness:0,manager:l[23].value,comment:l[24].value}).createTableRow(),a.style.display="none",document.documentElement.style.overflow="hidden",Client.showFooterInformation(),Client.search(),Client.showFooterInformation(),void Client.showCreateInformation(document.querySelector(".main tr:last-child"),function(e){setTimeout(function(){e.hidden=!0},3e3)})):(l[1].placeholder="поле обязательно для заполнения!",l[2].placeholder="поле обязательно для заполнения!",l[1].style.borderColor="#fb6e40",l[2].style.borderColor="#fb6e40",!1)}}if(o.classList.contains("lnr-laptop")){o.classList.remove("lnr-laptop"),o.classList.add("lnr-screen"),o.setAttribute("disabled","false");var c=document.querySelector(".container"),s=document.querySelector(".modal_window"),d=document.querySelector(".modal_window_create");document.querySelectorAll("tr")[0];if(c.style.width="1024px",s.style.width="1024px",d.style.width="1024px",main.style.height=document.documentElement.clientHeight-e.offsetHeight-t.offsetHeight-n.offsetHeight+"px",tbody.contains(tbody.querySelector(".fixed"))){var u=document.querySelectorAll("tr")[0],m=u.querySelectorAll("th"),h=tbody.querySelector(".fixed"),y=h.querySelectorAll("th");h.style.width=parseInt(getComputedStyle(u).width)+"px",h.style.top=e.getBoundingClientRect().bottom+window.pageYOffset+"px";for(var f=0;f<y.length;f++)y[f].style.width=parseInt(getComputedStyle(m[f]).width)+"px"}if(document.body.contains(document.querySelector(".calendar"))&&document.body.removeChild(document.querySelector(".calendar")),"true"===document.querySelector(".search .left_arrow").getAttribute("checked")){var p=document.querySelector(".search .select_option"),v=document.querySelector(".search .search_option"),b=v.getBoundingClientRect().top+window.pageYOffset,g=v.getBoundingClientRect().left+window.pageXOffset;p.style.top=b+v.offsetHeight+6+"px",p.style.left=g+"px"}}else if(o.classList.contains("lnr-screen")){o.classList.remove("lnr-screen"),o.classList.add("lnr-laptop"),o.setAttribute("disabled","true");var w=document.querySelector(".container"),k=document.querySelector(".modal_window"),_=document.querySelector(".modal_window_create");if(w.style.width="100%",k.style.width="100%",_.style.width="100%",main.style.height=document.documentElement.clientHeight-e.offsetHeight-t.offsetHeight-n.offsetHeight+"px",tbody.contains(tbody.querySelector(".fixed"))){var C=document.querySelectorAll("tr")[0],S=C.querySelectorAll("th"),L=tbody.querySelector(".fixed"),q=L.querySelectorAll("th");L.style.width=parseInt(getComputedStyle(C).width)+"px",L.style.top=e.getBoundingClientRect().bottom+window.pageYOffset+"px";for(var A=0;A<q.length;A++)q[A].style.width=parseInt(getComputedStyle(S[A]).width)+"px"}}o.classList.contains("left_arrow")&&Client.showSelectOption(),o.classList.contains("default_date")&&(Client.getDateStartAndEnd(),Client.search(),Client.showFooterInformation()),o.classList.contains("funnel")&&(Client.search(),Client.showFooterInformation()),o.classList.contains("clear_search_field")&&(Client.clearSearch(),Client.showFooterInformation(),document.querySelector(".funnel").removeAttribute("search")),o.classList.contains("create_calendar_1")&&!document.body.contains(document.querySelector(".calendar_1"))?function(){new Calendar(document.querySelector(".date_field_from"),"calendar_1").createCalendar();var e=document.querySelectorAll(".calendar_1 td"),t=document.querySelector(".date_field_from");document.onclick=function(e){e.target.classList.contains("create_calendar_1")||!document.body.contains(document.querySelector(".calendar_1"))||e.target.classList.contains("next_month_btn")||e.target.classList.contains("previous_month_btn")||e.target.classList.contains("next_year_btn")||e.target.classList.contains("previous_year_btn")||document.body.removeChild(document.querySelector(".calendar_1")),(e.target.classList.contains("next_month_btn")||e.target.classList.contains("previous_month_btn")||e.target.classList.contains("next_year_btn")||e.target.classList.contains("previous_year_btn"))&&function(){for(var e=document.querySelectorAll(".calendar_1 td"),n=function(n){e[n].onclick=function(){if(""===e[n].innerHTML)return!1;t.value=(new DateFormat).getDateFormat(e[n].innerHTML,Calendar.getYearAndMonth("calendar_1").month+1,Calendar.getYearAndMonth("calendar_1").year)}},r=0;r<e.length;r++)n(r)}()};for(var n=function(n){e[n].onclick=function(){if(""===e[n].innerHTML)return!1;t.value=(new DateFormat).getDateFormat(e[n].innerHTML,Calendar.getYearAndMonth("calendar_1").month+1,Calendar.getYearAndMonth("calendar_1").year)}},r=0;r<e.length;r++)n(r)}():o.classList.contains("create_calendar_1")&&document.body.contains(document.querySelector(".calendar_1"))&&document.body.removeChild(document.querySelector(".calendar_1")),o.classList.contains("create_calendar_2")&&!document.body.contains(document.querySelector(".calendar_2"))?function(){new Calendar(document.querySelector(".date_field_to"),"calendar_2").createCalendar();var e=document.querySelectorAll(".calendar_2 td"),t=document.querySelector(".date_field_to");document.onclick=function(e){e.target.classList.contains("create_calendar_2")||!document.body.contains(document.querySelector(".calendar_2"))||e.target.classList.contains("next_month_btn")||e.target.classList.contains("previous_month_btn")||e.target.classList.contains("next_year_btn")||e.target.classList.contains("previous_year_btn")||document.body.removeChild(document.querySelector(".calendar_2")),(e.target.classList.contains("next_month_btn")||e.target.classList.contains("previous_month_btn")||e.target.classList.contains("next_year_btn")||e.target.classList.contains("previous_year_btn"))&&function(){for(var e=document.querySelectorAll(".calendar_2 td"),n=function(n){e[n].onclick=function(){if(""===e[n].innerHTML)return!1;t.value=(new DateFormat).getDateFormat(e[n].innerHTML,Calendar.getYearAndMonth("calendar_2").month+1,Calendar.getYearAndMonth("calendar_2").year)}},r=0;r<e.length;r++)n(r)}()};for(var n=function(n){e[n].onclick=function(){if(""===e[n].innerHTML)return!1;t.value=(new DateFormat).getDateFormat(e[n].innerHTML,Calendar.getYearAndMonth("calendar_2").month+1,Calendar.getYearAndMonth("calendar_2").year)}},r=0;r<e.length;r++)n(r)}():o.classList.contains("create_calendar_2")&&document.body.contains(document.querySelector(".calendar_2"))&&document.body.removeChild(document.querySelector(".calendar_2")),document.body.contains(document.querySelector(".calendar_1"))&&o.classList.contains("create_calendar_2")&&document.body.removeChild(document.querySelector(".calendar_1")),document.body.contains(document.querySelector(".calendar_2"))&&o.classList.contains("create_calendar_1")&&document.body.removeChild(document.querySelector(".calendar_2"))}};window.addEventListener("load",init);